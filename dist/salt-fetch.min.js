!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("saltFetch",[],t):"object"==typeof exports?exports.saltFetch=t():e.saltFetch=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=window.salt=window.salt||{},o=n(1),a=n(2);r.fetch=o,r.storage=a,e.exports={fetch:o,storage:a}},function(e,t,n){!function(t,r){e.exports=r(n(2))}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(1)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2);void 0===a&&console.warn("Please install the `natty-storage` script which is required by `natty-fetch`, go on with https://www.npmjs.com/package/natty-storage");var i=n(3),c=n(5),s=n(6),u=n(4),l=n(7),f=n(8),p=n(9),d=u.extend,h=u.runAsFn,v=u.isAbsoluteUrl,g=u.isRelativeUrl,m=u.noop,y=u.isBoolean,_=u.isArray,b=u.isFunction,w=u.sortPlainObjectKey,k=u.isEmptyObject,j=u.isPlainObject,x=u.dummyPromise,O=u.isString,S=null,q="",E=!0,C=!E,P={data:{},didFetch:m,fit:m,header:{},ignoreSelfConcurrent:C,jsonp:C,log:C,method:"GET",mock:C,mockUrl:q,mockUrlPrefix:q,process:m,retry:0,request:S,timeout:0,traditional:C,url:q,urlPrefix:q,urlStamp:E,withCredentials:S,willFetch:m,storage:!1,plugins:!1},A=d({},P),N=function(){function e(t,n,o,a){r(this,e);var i=this;i.contextConfig=o,i._path=t;var c=i.config=i.processAPIOptions(n);i.api=function(e){if(e=e||{},c.ignoreSelfConcurrent&&i.api.pending)return x;c.overrideSelfConcurrent&&c._lastRequester&&(c._lastRequester.abort(),delete c._lastRequester);var t=i.makeVars(e);return 0===c.retry?i.request(t,c):i.tryRequest(t,c)},i.api.contextId=a,i.api._path=t,i.api.pending=C,i.api.config=c,i.initStorage();for(var s=_(n.plugins)?n.plugins:[],u=0,l=s.length;u<l;u++)s[u].call(i,i.api)}return o(e,[{key:"makeVars",value:function(e){var t=this,n=t.config,r={mark:{__api:t._path}};return n.mock&&(r.mark.__mock=E),n.urlStamp&&(r.mark.__stamp=+new Date),e=d({},n.data,h(e)),r.data=e,r}},{key:"processAPIOptions",value:function(e){var t=this,n=d({},t.contextConfig,e);return n.mock&&(n.mockUrl=t.getFullUrl(n)),n.url=t.getFullUrl(n),_(e.jsonp)&&(n.jsonp=y(e.jsonp[0])?e.jsonp[0]:C,n.jsonp&&(n.jsonpFlag=e.jsonp[1],n.jsonpCallbackName=e.jsonp[2])),!n.mock&&n.url.match(/\.jsonp(\?.*)?$/)&&(n.jsonp=E),n}},{key:"initStorage",value:function(){var e=this,t=e.config,n="GET"===t.method||t.jsonp;if(!n&&t.storage===E)throw new Error("A `"+t.method+"` request CAN NOT use `storage` which is only for `GET/jsonp` request! Please check the options for `"+e._path+"`");t.storage===E&&(t.storage={}),e.api.storageUseable=j(t.storage)&&("GET"===t.method||t.jsonp)&&a.support[t.storage.type||"localStorage"],e.api.storageUseable&&(e.api.storage=a(d({key:[e.api.contextId,e._path].join("_")},t.storage,{async:E,id:[t.storage.id,t.jsonp?"jsonp":t.method,t.url].join("_")})))}},{key:"request",value:function(e,t){var n=this;return new Promise(function(r,o){n.api.storageUseable?(e.queryString=k(e.data)?"no-query-string":JSON.stringify(w(e.data)),n.api.storage.has(e.queryString).then(function(r){return r.has?(t.willFetch(e,t,"storage"),r.value):n.remoteRequest(e,t)}).then(function(e){r(e)})["catch"](function(e){o(e)})):n.remoteRequest(e,t).then(function(e){r(e)})["catch"](function(e){o(e)})})}},{key:"getFullUrl",value:function(e){var t=e.mock?e.mockUrl:e.url;if(!t)return q;var n=e.mock?"mockUrlPrefix":"urlPrefix";return!e[n]||v(t)||g(t)?t:e[n]+t}},{key:"remoteRequest",value:function(e,t){var n=this;t.willFetch(e,t,"remote"),n.api.pending=E;var r=new s;return t.request?e.requester=t.request(e,t,r):t.jsonp?e.requester=n.sendJSONP(e,t,r):e.requester=n.sendAjax(e,t,r),t.overrideSelfConcurrent&&(t._lastRequester=e.requester),0!==t.timeout&&setTimeout(function(){if(n.api.pending&&e.requester){e.requester.abort(),delete e.requester;var o={timeout:E,message:"Timeout By "+t.timeout+"ms."};r.reject(o),l.fire("g.reject",[o,t]),l.fire(n.api.contextId+".reject",[o,t]),t.didFetch(e,t)}},t.timeout),r.promise}},{key:"tryRequest",value:function(e,t){var n=this;return new Promise(function(r,o){var a=0,i=function c(){e.mark.__retryTime=a,n.request(e,t).then(function(e){r(e),l.fire("g.resolve",[e,t],t),l.fire(n.api.contextId+".resolve",[e,t],t)},function(e){a===t.retry?o(e):(a++,c())})};i()})}},{key:"processResponse",value:function(e,t,n,r){var o=this;if(t.didFetch(e,t),r=t.fit(r,e),r.success)!function(){var a=t.process(r.content,e),i=function(){n.resolve(a),l.fire("g.resolve",[a,t],t),l.fire(o.api.contextId+".resolve",[a,t],t)};o.api.storageUseable?o.api.storage.set(e.queryString,a).then(function(){i()})["catch"](function(e){i()}):i()}();else{var a=d({message:"Processing Failed: "+o._path},r.error);n.reject(a),l.fire("g.reject",[a,t]),l.fire(o.api.contextId+".reject",[a,t])}}},{key:"sendAjax",value:function(e,t,n){var r=this;return i({traditional:t.traditional,cache:t.cache,mark:e.mark,log:t.log,url:t.mock?t.mockUrl:t.url,method:t.method,data:e.data,header:t.header,withCredentials:t.withCredentials,accept:"json",success:function(o){r.processResponse(e,t,n,o)},error:function(e){var t=void 0;switch(e){case 404:t="Not Found";break;case 500:t="Internal Server Error";break;default:t="Unknown Server Error"}n.reject({status:e,message:t})},complete:function(){void 0!==e.retryTime&&e.retryTime!==t.retry||(r.api.pending=C,e.requester=S,t.overrideSelfConcurrent&&delete t._lastRequester)}})}},{key:"sendJSONP",value:function(e,t,n){var r=this;return c({traditional:t.traditional,log:t.log,mark:e.mark,url:t.mock?t.mockUrl:t.url,data:e.data,cache:t.cache,flag:t.jsonpFlag,callbackName:t.jsonpCallbackName,success:function(o){r.processResponse(e,t,n,o)},error:function(e){n.reject({message:"Not Accessable JSONP `"})},complete:function(){void 0!==e.retryTime&&e.retryTime!==t.retry||(r.api.pending=C,e.requester=S,t.overrideSelfConcurrent&&delete t._lastRequester)}})}}]),e}(),T=function(){var e=0;return function(t,n){O(t)?n=n||{}:(n=t||{},t="c"+e++);var r=a({type:"variable",key:t}),o={};return o.api=r.get(),o._contextId=t,o._config=d({},A,n),o.create=function(e,n){var a=2===arguments.length&&O(e);a||(n=e);for(var i in n)r.set(a?e+"."+i:i,new N(a?e+"."+i:i,h(n[i]),o._config,t).api);o.api=r.get()},o.on=function(e,t){if(b(t))return l.on(o._contextId+"."+e,t),o},o}}(),R=void 0;R="2.0.0";var U=void 0;U=!0;var F=function(e){return new N("nattyFetch",h(e),P,"global").api()};d(F,{onlyForModern:U,version:R,_util:u,_event:l,context:T,ajax:i,jsonp:c,setGlobal:function(e){return A=d({},P,e),this},getGlobal:function(e){return e?A[e]:A},on:function(e,t){if(b(t))return l.on("g."+e,t),this},plugin:{loop:f,soon:p}}),F.setGlobal(P),e.exports=F},function(t,n){t.exports=e},function(e,t,n){"use strict";var r=n(4),o=r.extend,a=r.appendQueryString,i=r.noop,c=r.isCrossDomain,s=r.isBoolean,u=r.param,l=!1,f="undefined",p=null,d="GET",h="script",v="xml",g="json",m=f!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,y={"*":"*/*",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",json:"application/json, text/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},_=function(e,t){var n={Accept:y[t.accept]};c(t.url)||(n["X-Requested-With"]="XMLHttpRequest"),o(n,t.header),"POST"!==t.method||t.header["Content-Type"]||(n["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");for(var r in n)e.setRequestHeader(r,n[r])},b=function(e,t){e.__finished=l;var n=function(n){if(4===e.readyState)if(e.status>=200&&e.status<300||304===e.status){var r=e.responseText;switch(t.accept){case g:try{r=JSON.parse(r)}catch(n){console.warn("The response can NOT be parsed to JSON object.",r)}break;case h:(0,eval)(r);break;case v:r=e.responseXML}t.success(r,e)}else!e.__aborted&&t.error(e.status,e)};e.addEventListener("readystatechange",n);var r=function(){e.__finished||t.abort(e.status,e)};e.addEventListener("abort",r);var o=function(){e.__finished||(e.__finished=!0,t.complete(e.status,e),delete e.__aborted)};e.addEventListener("loadend",o)},w={url:"",mark:{},method:d,accept:"*",data:null,header:{},withCredentials:p,success:i,error:i,complete:i,abort:i,log:l,traditional:l},k=function(e){e=o({},w,e),c(e.url)&&(e.header={});var t=new XMLHttpRequest;b(t,e),t.open(e.method,a(e.url,o({},e.mark,e.method===d?e.data:{}),e.traditional)),t.withCredentials=s(e.withCredentials)?e.withCredentials:c(e.url),_(t,e),t.send(e.method===d?p:e.data!==p?u(e.data,e.traditional):p);var n=t.abort;return t.abort=function(){t.__aborted=!0,n.call(t)},t};k.fallback=!1,k.supportCORS=m,e.exports=k},function(e,t,n){"use strict";var r="undefined"!=typeof window,o=r?document:null,a=encodeURIComponent,i=null,c=Object.prototype.toString,s="[object Array]",u="[object Object]",l=!0,f=!l,p={dummy:l};p.then=p["catch"]=function(){return p};var d=r&&(!!window.ActiveXObject||"ActiveXObject"in window),h=function(e){return e},v=function(e){return function(){for(var t=arguments,n=e(t[0],t[1]),r=2,o=t.length;r<o;r++)n=e(n,t[r]);return n}},g=Math.random,m=Math.floor,y=function(){return m(9e9*g())},_=/^(https?:)?\/\//,b=function(e){return!!e.match(_)},w=/^[\.\/]/,k=function(e){return!!e.match(w)},j="boolean",x=function(e){return typeof e===j},O="string",S=function(e){return typeof e===O},q="function",E=function(e){return typeof e===q},C=function(e){return E(e)?e():e},P="number",A=function(e){return!isNaN(e)&&typeof e===P},N="object",T=function(e){return typeof e===N},R=function(e){return e!==i&&e===e.window},U=function(e){return e!==i&&T(e)&&!R(e)&&Object.getPrototypeOf(e)===Object.prototype},F=function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return 0===t},I=Array.isArray,D=void 0;o&&(D=o.createElement("a"),D.href=location.href);var K=function(e){var t=o.createElement("a");return t.href=e,D.hostname!==t.hostname||D.port!==t.port||D.protocol!==t.protocol},J=function z(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?f:arguments[2];for(var r in t)t.hasOwnProperty(r)&&void 0!==t[r]&&(n===l?I(t[r])?e[r]=[].concat(t[r]):U(t[r])?e[r]=z({},t[r]):e[r]=t[r]:e[r]=t[r]);return e},L=function(e){return!!e&&typeof e.length===P},Y=function(e,t){var n=void 0,r=void 0;if(L(e)){for(n=0,r=e.length;n<r;n++)if(t.call(e[n],e[n],n)===!1)return}else for(n in e)if(t.call(e[n],e[n],n)===!1)return},G=function V(e){var t={},n=void 0,r=[];for(n in e)e.hasOwnProperty(n)&&(r.push(n),U(e[n])&&(e[n]=V(e[n])));r.sort();for(var o=0,a=r.length;o<a;o++)t[r[o]]=e[r[o]];return t},H=function Q(e,t,n,r){var o=void 0,a=I(t),i=U(t);Y(t,function(t,l){o=c.call(t),r&&(l=n?r:r+"["+(i||o==u||o==s?l:"")+"]"),!r&&a?e.add(t.name,t.value):o==s||!n&&o==u?Q(e,t,n,l):e.add(l,t)})},M=function(e,t){var n=[];return n.add=function(e,t){E(t)&&(t=t()),t==i&&(t=""),n.push(a(e)+"="+a(t))},H(n,e,t),n.join("&").replace(/%20/g,"+")},X=function(e){return decodeURIComponent(e.replace(/\+/g," "))},B=function(e,t,n){var r=M(t,n);return r?e+(~e.indexOf("?")?"&":"?")+r:e};e.exports={appendQueryString:B,decodeParam:X,dummyPromise:p,each:Y,extend:v(J),isAbsoluteUrl:b,isArray:I,isBoolean:x,isCrossDomain:K,isEmptyObject:F,isFunction:E,isIE:d,isNumber:A,isPlainObject:U,isRelativeUrl:k,isString:S,makeRandom:y,noop:h,sortPlainObjectKey:G,param:M,runAsFn:C}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(4),a=o.appendQueryString,i=o.noop,c=o.extend,s=o.makeRandom,u="undefined"!=typeof window,l=u?window:null,f=u?document:null,p=null,d="script",h=!1,v=function(e){e.onerror=p,e.parentNode.removeChild(e),e=p},g=p,m=function(e,t){var n=f.createElement(d);return n.src=e,n.async=!0,n.onerror=function(e){l[t.callbackName]=p,t.error(e),t.complete()},g=g||f.getElementsByTagName("head")[0],g.insertBefore(n,g.firstChild),n},y={url:"",mark:{},data:{},success:i,error:i,complete:i,log:!1,flag:"callback",callbackName:"jsonp{id}",traditional:h},_=function(e){e=c({},y,e);var t=e.callbackName=e.callbackName.replace(/\{id\}/,s()),n=e.complete,o=void 0;e.complete=function(){v(o),n()},l[t]=function(n){l[t]=p,e.success(n),e.complete()};var i=a(e.url,c(r({},e.flag,t),e.mark,e.data),e.traditional);return o=m(i,e),{abort:function(){l[t]=function(){l[t]=p},v(o)}}};e.exports=_},function(e,t){"use strict";function n(){var e=this;e.promise=new Promise(function(t,n){e._resolve=t,e._reject=n})}n.prototype.resolve=function(e){this._resolve.call(this.promise,e)},n.prototype.reject=function(e){this._reject.call(this.promise,e)},e.exports=n},function(e,t){"use strict";function n(e){return r+e}var r="__",o={on:function(){var e=this,t=arguments;if("string"==typeof t[0]&&"function"==typeof t[1]){var r=n(t[0]);e[r]=e[r]||[],e[r].push(t[1])}else if("object"==typeof t[0]){var o=t[0];for(var a in o)e.on(a,o[a])}},off:function(e,t){var r=this,e=n(e);if(t){var o=r[e];o.splice(o.indexOf(t),1),r[e].length||delete r[e]}else delete r[e]},fire:function(e,t,r){var o=this,a=o[n(e)];if(!a)return"NO_EVENT";for(var i,c=0;i=a[c];c++)i.apply(r||o,[].concat(t))},hasEvent:function(e){return!!this[n(e)]}};e.exports=o},function(e,t,n){"use strict";var r=!1,o=!0,a=null,i=n(4),c=i.isNumber,s=i.noop;e.exports=function(e){var t=a;e.looping=r,e.startLoop=function(n){var r=arguments.length<=1||void 0===arguments[1]?s:arguments[1],a=arguments.length<=2||void 0===arguments[2]?s:arguments[2];if(!n.duration||!c(n.duration))throw new Error("Illegal `duration` value for `startLoop` method.");var i=function u(){e.looping=o,t=setTimeout(function(){e(n.data).then(r,a),u()},n.duration)};e(n.data).then(r,a),i()},e.stopLoop=function(){clearTimeout(t),e.looping=r,t=a}}},function(e,t,n){"use strict";var r=!1,o=!0,a=n(4),i=a.noop,c=a.isEmptyObject,s=a.sortPlainObjectKey;a.extend,a.runAsFn;e.exports=function(e){var t=this,n=e.config;e.soon=function(a){var u=arguments.length<=1||void 0===arguments[1]?i:arguments[1],l=arguments.length<=2||void 0===arguments[2]?i:arguments[2];if(!n.ignoreSelfConcurrent||!n.pending){n.overrideSelfConcurrent&&n._lastRequester&&(n._lastRequester.abort(),delete n._lastRequester);var f=t.makeVars(a);e.storageUseable?(f.queryString=c(f.data)?"no-query-string":JSON.stringify(s(f.data)),e.storage.has(f.queryString).then(function(e){return e.has&&(n.willFetch(f,n,"storage"),u({fromStorage:o,content:e.value})),t.remoteRequest(f,n)}).then(function(e){u({fromStorage:r,content:e})})["catch"](function(e){l(e)})):t.remoteRequest(f,n).then(function(e){u({fromStorage:r,content:e})})["catch"](function(e){l(e)})}}}}])})},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(1)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t={x:"x"},n="natty-storage-test",r=i(e);r.set(n,t);var o=JSON.stringify(r.get(n))===JSON.stringify(t);return r.remove(n),o}function a(e){throw new Error(e)}function i(e){return e=b[e],{set:function(t,n){e.setItem(t,JSON.stringify(n))},get:function(t){var n=e.getItem(t);if(!n)return k;try{n=JSON.parse(n)}catch(r){}return n},remove:function(t){e.removeItem(t)}}}function c(){var e=T;return{set:function(t,n){e[t]=n},get:function(t){return t in e?e[t]:k},remove:function(t){delete e[t]}}}function s(e){return e.split(j).reverse().join(j)}function u(e){var t;if(e.indexOf("\\.")===-1)t=e.split(".");else{t=s(e).split(/\.(?!\\)/).reverse();for(var n=0,r=t.length;n<r;n++)t[n]=s(t[n].replace(/\.\\/g,"."))}return t}function l(e,t,n){for(var r=u(e),o=n;r.length;){var a=r.shift();if(r.length)o[a]=o[a]||{},o=o[a];else{if(!y(o))throw new Error("Cannot create property `"+a+"` on non-object value, path:`"+e+"`");o[a]=t}}return n}function f(e,t,n){if(n=n||!1,n===!0||e.indexOf(".")===-1)return t[e];for(var r=u(e);r.length;){var o=r.shift();if(t=f(o,t,!0),"object"!=typeof t||void 0===t){r.length&&(t=void 0);break}}return t}function p(e,t,n){if(n=n||e.indexOf(".")===-1)return t.hasOwnProperty(e);for(var r=u(e);r.length;){var o=r.shift(),a=t.hasOwnProperty(o);if(!a||!r.length)return a;if(t=f(o,t,!0),!y(t))return O}}function d(e,t){for(var n=u(e),r=t;n.length;){var o=n.shift();n.length?(r[o]=r[o]||{},r=r[o]):delete r[o]}return t}function h(e){var t=x;for(var n in e){t=O;break}return t}var v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(2),m=g.extend,y=g.isPlainObject,_=g.noop,b=window,w="undefined"!=typeof b,k=null,j="",x=!0,O=!x,S="_placeholder",q=void 0;q="1.0.0";var E={localStorage:w&&!!b.localStorage&&o("localStorage"),sessionStorage:w&&!!b.sessionStorage&&o("sessionStorage")},C={type:"localStorage",key:j,tag:j,duration:0,until:0,async:!1},P=m({},C),A=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e);var n=this;if(n.config=m({},P,t),!n.config.key)throw new Error("`key` is missing, please check the options passed in `nattyStorage` constructor.");n._storage=E[n.config.type]?i(n.config.type):c(),n._CHECK_KEY="nattyStorageCheck:"+n.config.key,n._DATA_KEY="nattyStorageData:"+n.config.key,n._placeholderUsed=O,n._createStamp=+new Date}return v(e,[{key:"_lazyInit",value:function(){var e=this;e._checkData=e._storage.get(e._CHECK_KEY),e._isNew=e._checkData===k,e._isNew||e.isOutdated()?e._storage.set(e._DATA_KEY,e._data={}):(e._data=e._storage.get(e._DATA_KEY),e._data===k&&e._storage.set(e._DATA_KEY,e._data={})),e._storage.set(e._CHECK_KEY,e._checkData={id:e.config.id,lastUpdate:e._createStamp,duration:e.config.duration,until:e.config.until})}},{key:"isOutdated",value:function(){var e=this;if(e.config.id&&e.config.id!==e._checkData.id)return x;var t=+new Date;return e._checkData.duration&&t-e._checkData.lastUpdate>e._checkData.duration?x:e._checkData.until&&t>e._checkData.until?x:O}},{key:"set",value:function(e,t){var n=this,r=arguments.length,o=function(o,a){try{n._data||n._lazyInit(),1===r?y(e)?n._data=e:(n._data[S]=e,n._placeholderUsed=x):l(e,t,n._data),n._storage.set(n._DATA_KEY,n._data),o()}catch(i){a(i)}};return n.config.async?new Promise(o):void o(_,a)}},{key:"get",value:function(e){var t=this,n=void 0,r=function(r,o){try{t._data||t._lazyInit(),n=e?f(e,t._data):t._placeholderUsed?t._data[S]:t._data,r(n)}catch(a){o(a)}};return t.config.async?new Promise(r):(r(_,a),n)}},{key:"has",value:function(e){var t=this,n=void 0,r=function(r,o){try{if(t._data||t._lazyInit(),t._placeholderUsed||h(t._data))n=t._data.hasOwnProperty(S)?{has:!0,value:t._data[S]}:{},r(n);else{if(!e)throw new Error("a `path` argument should be passed into the `has` method");n=p(e,t._data)?{has:!0,value:f(e,t._data)}:{},r(n)}}catch(a){o(a)}};return t.config.async?new Promise(r):(r(_,a),n)}},{key:"remove",value:function(e){var t=this,n=function(n,r){try{t._data||t._lazyInit(),e?(d(e,t._data),t._storage.set(t._DATA_KEY,t._data)):t.set({}),n()}catch(o){r(o)}};return t.config.async?new Promise(n):void n(_,a)}},{key:"destroy",value:function(){var e=this;e._storage.remove(e._CHECK_KEY),e._storage.remove(e._DATA_KEY)}},{key:"dump",value:function(){JSON&&console&&console.log(JSON.stringify(this._data,k,4))}}]),e}(),N=function(e){return new A(e)};N.version=q,N._variable=T,N.support=E,N.setGlobal=function(e){P=m({},C,e)},N.getGlobal=function(e){return e?P[e]:P};var T={};e.exports=N},function(e,t,n){"use strict";var r=null,o=function(e){return function(){for(var t=arguments,n=e(t[0],t[1]),r=2,o=t.length;r<o;r++)n=e(n,t[r]);return n}},a="object",i=function(e){return typeof e===a},c=function(e){return e!==r&&e===e.window},s=function(e){return e!==r&&i(e)&&!c(e)&&Object.getPrototypeOf(e)===Object.prototype},u=Array.isArray,l=function p(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(u(t[n])?e[n]=[].concat(t[n]):s(t[n])?e[n]=p({},t[n]):e[n]=t[n]);return e},f=function(){};e.exports={extend:o(l),noop:f,isPlainObject:s}}])})}])});